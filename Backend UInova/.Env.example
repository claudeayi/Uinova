# =========================
# Serveur
# =========================
NODE_ENV=development
HOST=0.0.0.0
PORT=5000
APP_NAME=UInova API
APP_VERSION=3.0.0

# URL exposée (Swagger, logs de démarrage, webhooks)
API_BASE_URL=http://localhost:5000/api

# Mode maintenance
MAINTENANCE_MODE=0   # 1 = actif (503)

# CORS (séparées par virgule)
CORS_ORIGINS=http://localhost:3000,https://app.uinova.com

# Limites body parsers
JSON_LIMIT=10mb
URLENC_LIMIT=10mb

# =========================
# Base de données (Prisma)
# =========================
DATABASE_URL=mysql://uinova:uinova@mysql:3306/uinova
PRISMA_LOG=query,warn,error,info

# =========================
# Auth / JWT
# =========================
JWT_SECRET=change_me_super_secret
JWT_EXPIRES_IN=7d
BCRYPT_ROUNDS=12
PASSWORD_PEPPER=   # optionnel, sécurité supplémentaire

# =========================
# OpenAI (IA / Copilot)
# =========================
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxx

# =========================
# Paiements
# =========================
# Stripe
STRIPE_KEY=sk_test_xxxxxxxxxxxxxxxxxxxxxxxxx

# PayPal
PAYPAL_MODE=sandbox
PAYPAL_CLIENT_ID=xxxxxxxxxxxxxxxx
PAYPAL_CLIENT_SECRET=xxxxxxxxxxxxxxxx
PAYPAL_RETURN_URL=http://localhost:5000/paypal/return
PAYPAL_CANCEL_URL=http://localhost:5000/paypal/cancel

# CinetPay
CINETPAY_API_KEY=
CINETPAY_SITE_ID=
CINETPAY_BASE_URL=https://api-checkout.cinetpay.com/v2
CINETPAY_RETURN_URL=http://localhost:5000/cinetpay/return
CINETPAY_NOTIFY_URL=http://localhost:5000/cinetpay/notify

# =========================
# Redis / BullMQ (Jobs async)
# =========================
REDIS_URL=redis://localhost:6379
BULL_DASHBOARD_USER=admin
BULL_DASHBOARD_PASS=admin123

# =========================
# E-mails (SMTP / DKIM)
# =========================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-email@example.com
SMTP_PASS=your-smtp-password
MAIL_FROM="UInova <no-reply@uinova.com>"
SMTP_SECURE=0
SMTP_POOL=1
SMTP_TLS_REJECT_UNAUTHORIZED=1

# DKIM (optionnel, prod)
DKIM_DOMAIN=
DKIM_SELECTOR=default
DKIM_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"

# =========================
# Stockage / Uploads
# =========================
CLOUD_PROVIDER=LOCAL   # LOCAL | S3 | CLOUDINARY
UPLOAD_DIR=uploads
CDN_BASE_URL=

# S3 / MinIO
S3_BUCKET=
S3_REGION=eu-west-1
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_ENDPOINT=
S3_FORCE_PATH_STYLE=0

# Cloudinary
CLOUDINARY_CLOUD_NAME=
CLOUDINARY_API_KEY=
CLOUDINARY_API_SECRET=

# =========================
# Logs & Monitoring
# =========================
LOG_PATH=uinova.log
MAX_LOG_SIZE=5242880
JSON_LOGS=false
MORGAN_SKIP=0

# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics

# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# =========================
# Analytics (événements)
# =========================
ANALYTICS_DISABLED=0
ANALYTICS_BATCH_SIZE=50
ANALYTICS_FLUSH_MS=5000
ANALYTICS_SAMPLE=1
ANALYTICS_RL_PER_MIN=600
ANALYTICS_TRACE_GET=1

# =========================
# Collaboration (Socket.io)
# =========================
COLLAB_MAX_ROOM=200

# =========================
# AI Moderation
# =========================
AI_MOD_MAX_CHARS=1000
AI_MOD_BLOCK_PII=1
AI_MOD_BLOCK_URLS=0
AI_MOD_STRICT=0

# =========================
# Business Metrics (Cockpit)
# =========================
BUSINESS_METRICS_CRON=*/5 * * * *   # collecte toutes les 5 minutes
DEPLOY_METRICS_CRON=*/10 * * * *    # collecte toutes les 10 minutes

# =========================
# Webhooks (Externe)
# =========================
WEBHOOK_SECRET=change_me_webhook_secret
WEBHOOK_RETRY=3
