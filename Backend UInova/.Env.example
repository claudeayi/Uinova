# =========================
# Serveur
# =========================
NODE_ENV=development
HOST=0.0.0.0
PORT=5000
APP_NAME=UInova API
APP_VERSION=1.0.0

# URL de base exposée (Swagger servers, logs de démarrage)
API_BASE_URL=http://localhost:5000/api

# CORS (séparées par virgule) — ex: https://app.uinova.com,https://studio.uinova.com
CORS_ORIGINS=*

# Limites body parsers
JSON_LIMIT=4mb
URLENC_LIMIT=4mb

# =========================
# Base de données (Prisma)
# =========================
# MySQL (exemple)
DATABASE_URL=mysql://user:password@localhost:3306/uinova_db
# Logs Prisma en dev: query,warn,error,info
PRISMA_LOG=query,warn,error

# =========================
# Auth / JWT
# =========================
JWT_SECRET=change_me_super_secret
JWT_EXPIRES_IN=7d

# Sécurité mots de passe (hash)
BCRYPT_ROUNDS=12
# (optionnel) pepper côté serveur (ne JAMAIS exposer au client)
PASSWORD_PEPPER=

# =========================
# OpenAI (IA)
# =========================
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxx

# =========================
# Paiements
# =========================
# Stripe
STRIPE_KEY=sk_test_xxxxxxxxxxxxxxxxxxxxxxxxx

# PayPal (SDK officiel) — utilise PAYPAL_CLIENT_ID / PAYPAL_CLIENT_SECRET
PAYPAL_MODE=sandbox         # sandbox | live
PAYPAL_CLIENT_ID=xxxxxxxxxxxxxxxx
PAYPAL_CLIENT_SECRET=xxxxxxxxxxxxxxxx
PAYPAL_RETURN_URL=http://localhost:5000/paypal/return
PAYPAL_CANCEL_URL=http://localhost:5000/paypal/cancel

# CinetPay (optionnel)
CINETPAY_API_KEY=
CINETPAY_SITE_ID=
CINETPAY_BASE_URL=https://api-checkout.cinetpay.com/v2
CINETPAY_RETURN_URL=http://localhost:5000/cinetpay/return
CINETPAY_NOTIFY_URL=http://localhost:5000/cinetpay/notify

# =========================
# E-mails (SMTP)
# =========================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-email@example.com
SMTP_PASS=your-smtp-password
SMTP_FROM=UInova <no-reply@uinova.com>
SMTP_SECURE=0              # 1 si port 465
SMTP_POOL=1                # pool de connexions
# (optionnel) TLS
SMTP_TLS_REJECT_UNAUTHORIZED=1

# (optionnel) DKIM pour meilleure délivrabilité
DKIM_DOMAIN=
DKIM_SELECTOR=default
DKIM_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"

# =========================
# Stockage / Uploads unifié
# =========================
# Provider: LOCAL | S3 | CLOUDINARY
CLOUD_PROVIDER=LOCAL
CDN_BASE_URL=

# LOCAL
UPLOAD_DIR=uploads

# S3 / MinIO
S3_BUCKET=
S3_REGION=eu-west-1
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
# pour MinIO / endpoint custom
S3_ENDPOINT=
S3_FORCE_PATH_STYLE=0

# Cloudinary
CLOUDINARY_CLOUD_NAME=
CLOUDINARY_API_KEY=
CLOUDINARY_API_SECRET=

# =========================
# Logs
# =========================
LOG_PATH=uinova.log
MAX_LOG_SIZE=5242880       # 5 Mo
JSON_LOGS=false            # true pour logs JSON
MORGAN_SKIP=0              # 1 pour désactiver le logger HTTP

# =========================
# Analytics (événements)
# =========================
ANALYTICS_DISABLED=0
ANALYTICS_BATCH_SIZE=50
ANALYTICS_FLUSH_MS=5000
ANALYTICS_SAMPLE=1         # 0..1 (1 = 100%)
ANALYTICS_RL_PER_MIN=600   # rate limit par user
ANALYTICS_TRACE_GET=1      # trace des GET /api/*

# =========================
# Collaboration (Socket.io)
# =========================
COLLAB_MAX_ROOM=200
# CORS côté socket utilise CORS_ORIGINS

# =========================
# AI Moderation (local)
# =========================
AI_MOD_MAX_CHARS=1000
AI_MOD_BLOCK_PII=1
AI_MOD_BLOCK_URLS=0
AI_MOD_STRICT=0
