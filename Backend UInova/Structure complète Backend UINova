backend/
├─ src/
│  ├─ app.ts                   # Config Express (middlewares, routes, Swagger, Prometheus, etc.)
│  ├─ server.ts                # Serveur HTTP + Socket.io collab (CRDT, rooms)
│  │
│  ├─ controllers/             # Logique métiers (REST)
│  │  ├─ authController.ts
│  │  ├─ projectController.ts
│  │  ├─ pageController.ts
│  │  ├─ exportController.ts
│  │  ├─ paymentController.ts
│  │  ├─ badgeController.ts
│  │  ├─ notificationController.ts
│  │  ├─ uploadController.ts
│  │  ├─ aiController.ts
│  │  ├─ marketplaceController.ts
│  │  ├─ deployController.ts
│  │  ├─ replayController.ts
│  │  ├─ monitoringController.ts
│  │  ├─ organizationController.ts
│  │  ├─ emailTemplateController.ts
│  │  ├─ favoritesController.ts       # ✅ NEW – gestion favoris
│  │  ├─ purchasesController.ts       # ✅ NEW – gestion achats marketplace
│  │  ├─ billingController.ts         # ✅ NEW – rapport & historique usage
│  │  ├─ templatesController.ts       # ✅ NEW – templates IA + modèles
│  │  ├─ assistantController.ts       # ✅ NEW – assistant IA conversationnel
│  │  │
│  │  └─ admin/                       # ⚡ Spécifique admin
│  │     ├─ usersAdminController.ts
│  │     ├─ projectsAdminController.ts
│  │     ├─ marketplaceAdminController.ts
│  │     ├─ replaysAdminController.ts
│  │     ├─ billingAdminController.ts
│  │     └─ systemAdminController.ts  # ✅ NEW – supervision système (logs, quotas)
│  │
│  ├─ routes/                  # Définition des routes Express
│  │  ├─ auth.ts
│  │  ├─ projects.ts
│  │  ├─ pages.ts
│  │  ├─ exports.ts
│  │  ├─ payments.ts
│  │  ├─ badges.ts
│  │  ├─ notifications.ts
│  │  ├─ upload.ts
│  │  ├─ ai.ts
│  │  ├─ marketplace.ts
│  │  ├─ deploy.ts
│  │  ├─ replay.ts
│  │  ├─ monitoring.ts
│  │  ├─ organizations.ts
│  │  ├─ emailTemplates.ts
│  │  ├─ webhooks.ts
│  │  ├─ billing.ts             # ✅ enrichi – usage + historique
│  │  ├─ favorites.ts           # ✅ NEW – routes favoris
│  │  ├─ purchases.ts           # ✅ NEW – routes achats
│  │  ├─ templates.ts           # ✅ NEW – routes templates IA
│  │  ├─ assistant.ts           # ✅ NEW – routes assistant IA
│  │  └─ admin.ts
│  │
│  ├─ middlewares/
│  │  ├─ security.ts
│  │  ├─ validator.ts
│  │  ├─ validate.ts
│  │  ├─ upload.ts
│  │  ├─ rateLimit.ts
│  │  └─ errorHandler.ts
│  │
│  ├─ validators/               # Schemas Zod
│  │  ├─ marketplace.schema.ts
│  │  ├─ deploy.schema.ts
│  │  ├─ billing.schema.ts
│  │  ├─ organization.schema.ts
│  │  ├─ emailTemplate.schema.ts
│  │  ├─ favorites.schema.ts     # ✅ NEW
│  │  ├─ purchases.schema.ts     # ✅ NEW
│  │  └─ templates.schema.ts     # ✅ NEW
│  │
│  ├─ services/
│  │  ├─ collab.ts
│  │  ├─ paymentServices.ts
│  │  ├─ exportService.ts
│  │  ├─ aiService.ts
│  │  ├─ aiModeration.ts
│  │  ├─ deployService.ts
│  │  ├─ billingService.ts
│  │  ├─ emailService.ts
│  │  ├─ cloud.ts
│  │  ├─ eventBus.ts
│  │  ├─ businessMetrics.ts      # ✅ NEW – KPIs business
│  │  └─ deploymentMetrics.ts    # ✅ NEW – KPIs déploiement
│  │
│  ├─ utils/
│  │  ├─ prisma.ts
│  │  ├─ jwt.ts
│  │  ├─ hash.ts
│  │  ├─ mailer.ts
│  │  ├─ logger.ts
│  │  ├─ swagger.ts
│  │  └─ scheduler.ts            # ✅ NEW – cron jobs (cleanup, quotas)
│  │
│  ├─ __tests__/
│  │  ├─ auth.test.ts
│  │  ├─ projects.test.ts
│  │  ├─ marketplace.test.ts
│  │  ├─ deploy.test.ts
│  │  ├─ billing.test.ts
│  │  ├─ favorites.test.ts       # ✅ NEW – tests favoris
│  │  ├─ purchases.test.ts       # ✅ NEW – tests achats
│  │  └─ assistant.test.ts       # ✅ NEW – tests assistant IA
│  │
│  └─ types/
│     └─ express.d.ts
│
├─ prisma/
│  ├─ schema.prisma             # ✅ enrichi (Favorites, Purchases, UsageHistory…)
│  └─ seed.ts                   # ✅ seed users, orgs, badges, templates, purchases…
│
├─ uploads/
│
├─ swagger.yaml                 # ✅ enrichi (favorites, purchases, billing, templates, assistant)
│
├─ package.json
├─ tsconfig.json
├─ Dockerfile
├─ docker-compose.yml
├─ .dockerignore
├─ .env.example                 # ✅ clés test (Stripe, PayPal, CinetPay, OpenAI…)
└─ .github/
   └─ workflows/
      └─ ci.yml
